language: node_js
node_js:
  - "node"
cache:
  directories:
      - "node_modules"
before_install:
  - npm install -g --silent @angular/cli
  - npm install -g --silent firebase-tools
install:
  - npm install
script:
  - ng build --prod --base-href "/"
after_script:
  - firebase deploy --token $FIREBASE_TOKEN --non-interactive
before_deploy:
  - "echo {$FIREBASE_TOKEN}"
deploy:
  - provider: firebase
    project: $TRAVIS_BRANCH
    token:
      secure: 1/U_-TFsJoK6FXEKc1T_CBLZSFmp0sX2f1h6aaEJjozb0
    on:
      all_branches: true
